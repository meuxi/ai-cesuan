# AI æ™ºèƒ½å åœ - AI Divination System

åŸºäº AI å¤§æ¨¡å‹çš„æ™ºèƒ½ç®—å‘½ã€å åœåº”ç”¨ï¼Œæ”¯æŒ 20+ ç§å åœæ–¹å¼ï¼Œæä¾›æµå¼è¾“å‡ºä½“éªŒå’Œå†å²è®°å½•ç®¡ç†ã€‚

![demo](assets/demo.png)


## åŠŸèƒ½åˆ—è¡¨

### æ ¸å¿ƒå åœåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ğŸ´ **å¡”ç½—ç‰Œå åœ** | å¤šç§ç‰Œé˜µï¼ˆå•å¼ ã€ä¸‰å¼ ã€å‡¯å°”ç‰¹åå­—ç­‰ï¼‰ï¼ŒAI æ·±åº¦è§£è¯» |
| ğŸ”® **ç´«å¾®æ–—æ•°** | åäºŒå®«ä½è¯¦è§£ï¼Œå‘½ç›˜æ’ç›˜ï¼Œå¤§é™æµå¹´åˆ†æ |
| ğŸ“… **ç”Ÿè¾°å…«å­—** | å››æŸ±å…«å­—æ’ç›˜ï¼Œäº”è¡Œåˆ†æï¼Œç¥ç…æ¨ç®— |
| ğŸ’‘ **å…«å­—åˆå©š** | ç”·å¥³å…«å­—é…å¯¹ï¼Œå©šå§»å‰å‡¶åˆ†æ |
| ğŸ’• **å§»ç¼˜å åœ** | ç¼˜åˆ†æŒ‡æ•°æµ‹ç®—ï¼Œæ„Ÿæƒ…è¿åŠ¿åˆ†æ |
| ğŸ‘¶ **èµ·åå–å** | ç»“åˆäº”è¡Œå…«å­—ï¼ŒAI æ¨èå‰ç¥¥åå­— |
| ğŸ“ **å§“åäº”æ ¼** | å§“åç¬”ç”»åˆ†æï¼Œæ€§æ ¼å‘½è¿è§£è¯» |
| ğŸŒ™ **å‘¨å…¬è§£æ¢¦** | æ¢¦å¢ƒå«ä¹‰è§£æï¼Œæ½œæ„è¯†æ¢ç´¢ |
| ğŸŒ¸ **æ¢…èŠ±æ˜“æ•°** | ä¼ ç»Ÿæ˜“å­¦å åœï¼Œæ•°ç†æ¨ç®— |
| ğŸ² **å…­çˆ»èµ·å¦** | å‘¨æ˜“çº³ç”²ç­®æ³•ï¼Œæ‘‡é’±/æ•°ç†/æ—¶ç©ºä¸‰æ³•èµ·å¦ |
| ğŸ”¢ **å°å…­å£¬** | å¤§å®‰ã€ç•™è¿ã€é€Ÿå–œç­‰å…­ç¥æ¨ç®— |
| ğŸ§™ **è¯¸è‘›ç¥ç®—** | ä¸‰å­—æµ‹å‰å‡¶ï¼Œç¥æœºå¦™ç®— |
| ğŸ™ **çµç­¾é—®è·¯** | è§‚éŸ³çµç­¾ã€æœˆè€çµç­¾ç­‰æ±‚ç­¾é—®å¦ |

### è¿åŠ¿åˆ†æ

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| â˜€ï¸ **æ¯æ—¥è¿åŠ¿** | åŸºäºå…«å­—æ—¥å¹²çš„æ¯æ—¥è¿åŠ¿åˆ†æ |
| ğŸ“† **æ¯æœˆè¿åŠ¿** | æœˆåº¦è¿åŠ¿æ€»è§ˆä¸å…³é”®æ—¥æœŸæç¤º |
| â­ **æ˜Ÿåº§è¿åŠ¿** | åäºŒæ˜Ÿåº§è¿åŠ¿æŸ¥è¯¢ã€æ˜Ÿåº§é…å¯¹ |
| ğŸ“ˆ **äººç”ŸKçº¿** | å…«å­—è¿åŠ¿å¯è§†åŒ–ï¼Œå‘½è¿èµ·ä¼å›¾è¡¨ |
| ğŸ“œ **è€é»„å†** | æ¯æ—¥å®œå¿Œã€å‰å‡¶æ–¹ä½ã€æ—¶è¾°å‰å‡¶ |

### ç‰¹è‰²åŠŸèƒ½

- ğŸŒŠ **æµå¼è¾“å‡º** - AI å åœç»“æœä»¥æ‰“å­—æœºæ•ˆæœå®æ—¶å‘ˆç°
- ğŸ“š **å†å²è®°å½•** - æ¯ç§å åœç±»å‹è‡ªåŠ¨ä¿å­˜æœ€è¿‘è®°å½•
- ğŸ“± **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…æ‰‹æœºã€å¹³æ¿ã€ç”µè„‘
- ğŸŒ™ **æš—è‰²æ¨¡å¼** - æ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢
- ğŸŒ **å¤šè¯­è¨€** - æ”¯æŒä¸­æ–‡/è‹±æ–‡ç•Œé¢
- ğŸ”„ **å¤šæ¨¡å‹æ•…éšœè½¬ç§»** - è‡ªåŠ¨åˆ‡æ¢å¯ç”¨çš„ AI æ¨¡å‹
- ğŸ“¤ **åˆ†äº«å¯¼å‡º** - æ”¯æŒå¤åˆ¶ã€åˆ†äº«ã€å¯¼å‡ºå›¾ç‰‡ï¼ˆå«äºŒç»´ç ï¼‰

---

## éƒ¨ç½²æ–¹å¼

### æ–¹å¼ä¸€ï¼šVercel ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰â­

æœ€ç®€å•å¿«æ·çš„éƒ¨ç½²æ–¹å¼ï¼Œæ— éœ€æœåŠ¡å™¨ï¼Œå®Œå…¨å…è´¹ã€‚
1. ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹éƒ¨ç½²ï¼š
[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fmeuxi%2Fai-cesuan.git&env=api_key,api_base,dashscope_api_key,deepseek_api_key,enable_rate_limit,zhipu_api_key,siliconflow_api_key&project-name=my-ai-divination&repository-name=my-ai-divination)

2.åœ¨éƒ¨ç½²æ—¶é…ç½®ç¯å¢ƒå˜é‡ï¼š
api_keyï¼šå¿…å¡«ï¼Œä½ çš„ OpenAI API Key
api_baseï¼šå¯é€‰ï¼ŒAPI åœ°å€ï¼ˆé»˜è®¤ä¸º OpenAI å®˜æ–¹åœ°å€ï¼‰
å…¶ä»–å¯é€‰å‚æ•°ï¼šmodelã€github_client_idã€github_client_secret ç­‰

3.éƒ¨ç½²å®Œæˆåï¼ŒVercel ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªè®¿é—®åŸŸå

4.ä¹Ÿå¯ä»¥ç»‘å®šè‡ªå·±çš„åŸŸå

### æ–¹å¼äºŒï¼šDocker éƒ¨ç½²

åˆ›å»º `docker-compose.yml` æ–‡ä»¶ï¼š

```yaml
services:
  ai-divination:
    image: ghcr.io/your-username/ai-divination:latest
    container_name: ai-divination
    restart: always
    ports:
      - 8000:8000
    environment:
      # å¿…å¡«ï¼šè‡³å°‘é…ç½®ä¸€ä¸ª AI API
      - api_key=sk-xxx
      # - api_base=https://api.openai.com/v1
      
      # å¯é€‰ï¼šé˜¿é‡Œäº‘ç™¾ç‚¼
      # - dashscope_api_key=sk-xxx
      # - dashscope_model=qwen-plus
      
      # å¯é€‰ï¼šDeepSeek
      # - deepseek_api_key=sk-xxx
      
      # å¯é€‰ï¼šGitHub OAuth
      # - github_client_id=xxx
      # - github_client_secret=xxx
      # - jwt_secret=your-secret
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
docker-compose up -d
```

è®¿é—® `http://localhost:8000` å³å¯ä½¿ç”¨ã€‚

### æ–¹å¼ä¸‰ï¼šæœ¬åœ°å¼€å‘è¿è¡Œ

**å‰ç½®è¦æ±‚**ï¼š
- Node.js 18+
- Python 3.10+
- pnpm

**æ­¥éª¤**ï¼š

1. **å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/your-username/ai-divination.git
cd ai-divination
```

2. **é…ç½®ç¯å¢ƒå˜é‡**

```bash
# åç«¯é…ç½®
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å†™ API Key ç­‰é…ç½®

# å‰ç«¯é…ç½®ï¼ˆå¯é€‰ï¼‰
cp frontend/.env.example frontend/.env
```

3. **å®‰è£…ä¾èµ–å¹¶å¯åŠ¨åç«¯**

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨åç«¯
python main.py
```

4. **å®‰è£…ä¾èµ–å¹¶å¯åŠ¨å‰ç«¯**ï¼ˆæ–°å¼€ç»ˆç«¯ï¼‰

```bash
cd frontend
pnpm install
pnpm dev
```

5. **è®¿é—®åº”ç”¨**
   - å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼š`http://localhost:5173`
   - åç«¯ API æœåŠ¡å™¨ï¼š`http://localhost:8000`

**å¿«æ·å¯åŠ¨è„šæœ¬**ï¼ˆWindowsï¼‰ï¼š

```bash
# å¯åŠ¨åç«¯
start-backend.bat

# å¯åŠ¨å‰ç«¯
start-frontend.bat

# æˆ–ä½¿ç”¨ PowerShell è„šæœ¬åŒæ—¶å¯åŠ¨
.\dev-start.ps1
```

---

## ç¯å¢ƒå˜é‡é…ç½®

### å¿…å¡«é…ç½®

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| `api_key` | OpenAI API Key | `sk-xxx` |

### AI æ¨¡å‹é…ç½®ï¼ˆå¯é€‰ï¼Œæ”¯æŒå¤šæ¨¡å‹æ•…éšœè½¬ç§»ï¼‰

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `api_base` | OpenAI API åœ°å€ | `https://api.openai.com/v1` |
| `model` | OpenAI æ¨¡å‹ | `gpt-3.5-turbo` |
| `dashscope_api_key` | é˜¿é‡Œäº‘ç™¾ç‚¼ API Key | - |
| `dashscope_model` | ç™¾ç‚¼æ¨¡å‹ | `qwen-plus` |
| `deepseek_api_key` | DeepSeek API Key | - |
| `deepseek_model` | DeepSeek æ¨¡å‹ | `deepseek-chat` |
| `zhipu_api_key` | æ™ºè°±AI API Key | - |
| `zhipu_model` | æ™ºè°±AI æ¨¡å‹ | `glm-4-air` |
| `siliconflow_api_key` | ç¡…åŸºæµåŠ¨ API Key | - |
| `siliconflow_model` | ç¡…åŸºæµåŠ¨æ¨¡å‹ | `deepseek-ai/DeepSeek-R1-Distill-Qwen-7B` |

### å…¶ä»–å¯é€‰é…ç½®

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `enable_rate_limit` | å¯ç”¨é¢‘ç‡é™åˆ¶ | `false` |
| `rate_limit` | æœªç™»å½•ç”¨æˆ·é™åˆ¶ | `60,3600` (60æ¬¡/å°æ—¶) |
| `user_rate_limit` | ç™»å½•ç”¨æˆ·é™åˆ¶ | `600,3600` (600æ¬¡/å°æ—¶) |
| `cache_client_type` | ç¼“å­˜ç±»å‹ | `memory` |
| `github_client_id` | GitHub OAuth ID | - |
| `github_client_secret` | GitHub OAuth Secret | - |
| `jwt_secret` | JWT å¯†é’¥ | - |

è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒ `.env.example` æ–‡ä»¶ã€‚

---

## é¡¹ç›®ç»“æ„

```
ai-divination/
â”œâ”€â”€ frontend/                 # å‰ç«¯ä»£ç  (React + TypeScript + Vite)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hooks/           # React Hooks
â”‚   â”‚   â”œâ”€â”€ services/        # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ i18n/            # å›½é™…åŒ–
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ src/                      # åç«¯ä»£ç  (Python + FastAPI)
â”‚   â”œâ”€â”€ divination/          # å åœç®—æ³•æ¨¡å—
â”‚   â”œâ”€â”€ prompts/             # AI æç¤ºè¯æ¨¡æ¿
â”‚   â”œâ”€â”€ ai/                  # AI æœåŠ¡å°è£…
â”‚   â”œâ”€â”€ cache/               # ç¼“å­˜æœåŠ¡
â”‚   â””â”€â”€ chatgpt_router.py    # API è·¯ç”±
â”œâ”€â”€ scripts/                  # å·¥å…·è„šæœ¬
â”œâ”€â”€ .env.example             # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ docker-compose.yaml      # Docker é…ç½®
â”œâ”€â”€ requirements.txt         # Python ä¾èµ–
â””â”€â”€ vercel.json              # Vercel é…ç½®
```

---

## æŠ€æœ¯æ ˆ

**å‰ç«¯**ï¼š
- React 18 + TypeScript
- Vite
- Tailwind CSS + shadcn/ui
- React Router
- i18next (å›½é™…åŒ–)
- Zustand (çŠ¶æ€ç®¡ç†)

**åç«¯**ï¼š
- Python 3.10+
- FastAPI
- OpenAI SDK (å…¼å®¹å¤šç§ AI API)
- iztro (ç´«å¾®æ–—æ•°)
- lunar-python (å†œå†/å…«å­—)

**éƒ¨ç½²**ï¼š
- Vercel (æ¨è)
- Docker
- ä»»æ„æ”¯æŒ Python çš„æœåŠ¡å™¨

---

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„å åœåŠŸèƒ½

1. **åç«¯**ï¼šåœ¨ `src/divination/` æ·»åŠ å åœç®—æ³•æ¨¡å—
2. **å‰ç«¯**ï¼šåœ¨ `frontend/src/pages/divination/` æ·»åŠ é¡µé¢ç»„ä»¶
3. **è·¯ç”±**ï¼šåœ¨ `frontend/src/App.tsx` æ·»åŠ è·¯ç”±
4. **é…ç½®**ï¼šåœ¨ `frontend/src/config/constants.ts` æ·»åŠ åŠŸèƒ½é…ç½®

### ä»£ç è§„èŒƒ

- å‰ç«¯ä½¿ç”¨ ESLint + Prettier
- åç«¯ä½¿ç”¨ flake8
- æäº¤ä¿¡æ¯éµå¾ª Conventional Commits

---

## å…è´£å£°æ˜

æœ¬åº”ç”¨ä»…ä¾›å¨±ä¹å‚è€ƒï¼Œä¸æ„æˆä»»ä½•å†³ç­–å»ºè®®ã€‚å åœç»“æœç”± AI ç”Ÿæˆï¼Œè¯·ç†æ€§çœ‹å¾…ã€‚

---

## License

MIT License

---

## è‡´è°¢

- [iztro](https://github.com/SylarLong/iztro) - ç´«å¾®æ–—æ•°ç®—æ³•åº“
- [lunar-python](https://github.com/6tail/lunar-python) - å†œå†/å…«å­—ç®—æ³•åº“
- [shadcn/ui](https://ui.shadcn.com/) - UI ç»„ä»¶åº“
- [react-iztro](https://github.com/SylarLong/react-iztro) - ç´«å¾®æ–—æ•°å‘½ç›˜æ ·å¼å‚è€ƒ
