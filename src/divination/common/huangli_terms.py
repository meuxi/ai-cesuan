"""
黄历宜忌术语释义
100+条传统黄历宜忌术语的中文解释

数据来源：马年测算系统 data/huangli/hdjr.array.php
"""
from typing import Optional


# 黄历宜忌术语释义字典
HUANGLI_TERMS = {
    # 婚嫁类
    '嫁娶': '男娶女嫁，举行结婚大典的吉日',
    '納采': '缔结婚姻的仪式、受授聘金',
    '訂盟': '订婚仪式的一种，俗称小聘(订)',
    '裁衣': '临近婚期前一个月，男方要备酒、蓝布和金银钗环交给媒人送到女方家',
    '合帳': '制作蚊帐之事，今应指安置窗帘',
    
    # 祭祀祈福类
    '祭祀': '指祠堂之祭祀、即拜祭祖先或庙寺的祭拜、神明等事',
    '祈福': '祈求神明降福或设醮还愿之事',
    '斋醮': '庙宇建醮前需举行的斋戒仪式',
    '齋醮': '庙宇建醮前需举行的斋戒仪式',
    '開光': '佛像塑成后、供奉上位之事',
    '安香': '安土地公或祖先之神位',
    '出火': '谓移动神位，「火」指「香火」而言',
    '塑繪': '寺庙之绘尽或雕刻神像、画雕人像等',
    '謝土': '建筑物完工后所举行的祭祀',
    
    # 丧葬类
    '安葬': '举行埋葬等仪式',
    '入殓': '将尸体放入棺材之意',
    '入殮': '入殓就是将尸体放入棺材之意',
    '移柩': '行葬仪时、将棺木移出屋外之事',
    '破土': '仅指埋葬用的破土、与一般建筑房屋的"动土"不同，即"破土"属阴宅，"动土"属阳宅也',
    '修坟': '修理坟墓',
    '修墳': '也就是修理坟墓。需要注意的是，修坟与建坟是不一样的。修理坟墓就是跟修屋一样，年深日久或是坟地出了问题才修理一下',
    '除服': '脱下丧服',
    '成服': '穿上丧服',
    '啟攢': '指坟墓「洗骨」之事。俗谓「拾金」也',
    '合壽木': '指生前预先购买棺材',
    '開生墳': '指人未死，先找地作坟墓',
    '立碑': '竖立墓碑或纪念碑',
    
    # 出行迁移类
    '出行': '指外出旅行、观光游览',
    '移徙': '指搬家迁移住所之意',
    '入宅': '即迁入新宅、所谓"新居落成典礼"也',
    '赴任': '走马上任',
    
    # 建筑修造类
    '動土': '建筑时、第一次动起锄头挖土',
    '起基': '建筑时、第一次动起锄头挖土',
    '修造': '指阳宅之造与修理',
    '造屋': '装盖房屋等工作',
    '上樑': '装上建筑物屋顶的梁，同架马',
    '作樑': '指砍伐树木作屋梁',
    '豎柱': '架马俗称起工架马；指建筑场所之鹰架',
    '定磉': '意为着平建基，固定石磉',
    '開柱眼': '指作柱木之事',
    '安门': '放置正门门框',
    '安門': '房屋装设门户等工事',
    '拆卸': '拆掉建筑物',
    '破屋': '拆卸；拆除房屋',
    '壞垣': '拆卸；指拆除围墙',
    '補垣': '塞穴、填坑、覆井；塞穴指堵塞洞穴或蚁穴',
    '修飾垣牆': '即修补与粉饰围墙',
    '築堤': '修筑或加固河堤或海堤',
    '造橋': '建造桥梁',
    '平治道塗': '即修整道路的意思',
    '作灶': '指安修厨灶、厨炉移位',
    '作廁': '建造或修改厕所',
    '掘井': '即开凿水井',
    '开池': '挖掘池塘',
    '開池': '挖掘池塘',
    '放水': '亦称"开渠放水"，即把水注入新造的蓄水池',
    '塞穴': '指堵塞洞穴或蚁穴等',
    '造倉': '建筑仓库或修理仓库',
    '造畜椆栖': '指修建家禽及家畜住的小屋',
    
    # 家居生活类
    '安床': '指安置睡床卧铺之意',
    '掃舍': '把屋内外打扫干净',
    '解除': '指冲洗清扫宅舍、解除灾厄等事',
    '置產': '又称为"修置产室"，即购买成屋的意思',
    '挂匾': '指悬挂招牌或各种匾额',
    '掛匾': '指悬挂招牌或各种匾额。包括公司的，也包括家里古时府上的牌匾',
    '安機械': '安机器、安纺车',
    '經絡': '安机器、织布、收蚕、安纺车、机器',
    '安碓磑': '就是"安放舂米的石磨"的意思',
    
    # 商业交易类
    '開市': '"开业"之意，商品行号开张做生意"开幕典礼""开工"同。包括：(1)年头初开始营业或开工等事(2)新设店铺商行或新厂开幕等事',
    '立券': '订立各种契约互相买卖之事',
    '交易': '订立各种契约互相买卖之事',
    '納財': '购屋产业、进货、收帐、收租、讨债、贷款、五谷入仓等',
    '開倉': '出货财，商贾之出货、销货、放债',
    '出貨財': '指新公司或新年度首次从仓库销出货物，出货放贷',
    
    # 农牧渔猎类
    '栽種': '种植物"接果""种田禾"同',
    '伐木': '采伐林木',
    '纳畜': '牧养、收买入家畜、家禽、宠物等',
    '納畜': '牧养、收买入家畜、家禽、宠物等',
    '牧養': '放牧饲养',
    '教牛馬': '谓训练牛马之工作',
    '結網': '织鱼网',
    '取漁': '捕鱼',
    '畋獵': '打猎或捕捉禽兽',
    '捕捉': '断蚁，扑灭家中或农作物之害虫生物',
    '割蜜': '割蜜、造麴酿酒、养蜂取蜜(酝酿辛日不宜)',
    
    # 交通工具类
    '造船': '即制造水上的交通工具',
    '造車器': '造舟船；制造水陆交通工具(适新车交车)',
    
    # 人事礼仪类
    '冠笄': '男女年满二十岁所举行的成年礼仪式',
    '求嗣': '指向神明祈求后嗣(子孙)之意',
    '進人口': '指收纳养子女，或认干儿子、干女儿',
    '詞訟': '即"打官司",起诉状',
    
    # 医疗卫生类
    '求醫': '仅指求医治疗慢性痼疾或动手术',
    '治病': '治疗疾病',
    '沐浴': '即洗澡净身, 指斋戒沐浴净身, 亦指出生儿首次洗身的意思',
    '理髮': '仅指初生婴儿第一次剃胎发或出家',
    '整手足甲': '初生婴儿第一次修剪手足甲',
    
    # 特殊标注
    '餘事勿取': '就是其他的事情都不要做，危厉程度仅次于诸事不宜',
    '諸事不宜': '宜：是指这一天没有特别合适做的事。忌：是指这一天做事犯忌',
}


# 术语分类
HUANGLI_CATEGORIES = {
    '婚嫁': ['嫁娶', '納采', '訂盟', '裁衣', '合帳'],
    '祭祀祈福': ['祭祀', '祈福', '斋醮', '齋醮', '開光', '安香', '出火', '塑繪', '謝土'],
    '丧葬': ['安葬', '入殓', '入殮', '移柩', '破土', '修坟', '修墳', '除服', '成服', '啟攢', '合壽木', '開生墳', '立碑'],
    '出行迁移': ['出行', '移徙', '入宅', '赴任'],
    '建筑修造': ['動土', '起基', '修造', '造屋', '上樑', '作樑', '豎柱', '定磉', '開柱眼', '安门', '安門', '拆卸', '破屋', '壞垣', '補垣', '修飾垣牆', '築堤', '造橋', '平治道塗', '作灶', '作廁', '掘井', '开池', '開池', '放水', '塞穴', '造倉', '造畜椆栖'],
    '家居生活': ['安床', '掃舍', '解除', '置產', '挂匾', '掛匾', '安機械', '經絡', '安碓磑'],
    '商业交易': ['開市', '立券', '交易', '納財', '開倉', '出貨財'],
    '农牧渔猎': ['栽種', '伐木', '纳畜', '納畜', '牧養', '教牛馬', '結網', '取漁', '畋獵', '捕捉', '割蜜'],
    '交通工具': ['造船', '造車器'],
    '人事礼仪': ['冠笄', '求嗣', '進人口', '詞訟'],
    '医疗卫生': ['求醫', '治病', '沐浴', '理髮', '整手足甲'],
    '特殊标注': ['餘事勿取', '諸事不宜'],
}


def get_term_meaning(term: str) -> Optional[str]:
    """
    获取黄历术语的释义
    
    Args:
        term: 黄历术语，如"嫁娶"、"祭祀"等
        
    Returns:
        术语释义，未找到返回None
    """
    return HUANGLI_TERMS.get(term)


def get_term_category(term: str) -> Optional[str]:
    """
    获取黄历术语所属分类
    
    Args:
        term: 黄历术语
        
    Returns:
        分类名称，未找到返回None
    """
    for category, terms in HUANGLI_CATEGORIES.items():
        if term in terms:
            return category
    return None


def get_all_terms_by_category(category: str) -> list:
    """
    获取指定分类下的所有术语
    
    Args:
        category: 分类名称
        
    Returns:
        术语列表
    """
    return HUANGLI_CATEGORIES.get(category, [])


def search_terms(keyword: str) -> dict:
    """
    搜索包含关键词的术语
    
    Args:
        keyword: 搜索关键词
        
    Returns:
        匹配的术语及释义字典
    """
    results = {}
    for term, meaning in HUANGLI_TERMS.items():
        if keyword in term or keyword in meaning:
            results[term] = meaning
    return results


# 导出
__all__ = [
    'HUANGLI_TERMS',
    'HUANGLI_CATEGORIES',
    'get_term_meaning',
    'get_term_category',
    'get_all_terms_by_category',
    'search_terms',
]
